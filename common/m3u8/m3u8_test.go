package m3u8

import (
	"bytes"
	"testing"

	"github.com/grafov/m3u8"
	"github.com/stretchr/testify/require"
)

const m3u8Sample1 = `
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=688301
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/0640_vod.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=165135
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/0150_vod.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=262346
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/0240_vod.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=481677
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/0440_vod.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1308077
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/1240_vod.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1927853
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/1840_vod.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=2650941
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/2540_vod.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=3477293
http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/3340_vod.m3u8
`

const m3u8Sample2 = `
#EXTM3U
#EXT-X-TARGETDURATION:10
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:10,
0640/06400.ts
#EXTINF:10,
0640/06401.ts
#EXTINF:10,
0640/06402.ts
#EXTINF:10,
0640/06403.ts
#EXTINF:10,
0640/06404.ts
#EXTINF:10,
0640/06405.ts
#EXTINF:10,
0640/06406.ts
#EXTINF:10,
0640/06407.ts
#EXTINF:10,
0640/06408.ts
#EXTINF:10,
0640/06409.ts
#EXTINF:10,
0640/064010.ts
#EXTINF:10,
0640/064011.ts
#EXTINF:10,
0640/064012.ts
#EXTINF:10,
0640/064013.ts
#EXTINF:10,
0640/064014.ts
#EXTINF:10,
0640/064015.ts
#EXTINF:10,
0640/064016.ts
#EXTINF:10,
0640/064017.ts
#EXTINF:10,
0640/064018.ts
#EXTINF:10,
0640/064019.ts
#EXTINF:10,
0640/064020.ts
#EXTINF:10,
0640/064021.ts
#EXTINF:10,
0640/064022.ts
#EXTINF:10,
0640/064023.ts
#EXTINF:10,
0640/064024.ts
#EXTINF:10,
0640/064025.ts
#EXTINF:10,
0640/064026.ts
#EXTINF:10,
0640/064027.ts
#EXTINF:10,
0640/064028.ts
#EXTINF:10,
0640/064029.ts
#EXTINF:10,
0640/064030.ts
#EXTINF:10,
0640/064031.ts
#EXTINF:10,
0640/064032.ts
#EXTINF:10,
0640/064033.ts
#EXTINF:10,
0640/064034.ts
#EXTINF:10,
0640/064035.ts
#EXTINF:10,
0640/064036.ts
#EXTINF:10,
0640/064037.ts
#EXTINF:10,
0640/064038.ts
#EXTINF:10,
0640/064039.ts
#EXTINF:10,
0640/064040.ts
#EXTINF:10,
0640/064041.ts
#EXTINF:10,
0640/064042.ts
#EXTINF:10,
0640/064043.ts
#EXTINF:10,
0640/064044.ts
#EXTINF:10,
0640/064045.ts
#EXTINF:10,
0640/064046.ts
#EXTINF:10,
0640/064047.ts
#EXTINF:10,
0640/064048.ts
#EXTINF:11,
0640/064049.ts
#EXTINF:10,
0640/064050.ts
#EXTINF:10,
0640/064051.ts
#EXTINF:10,
0640/064052.ts
#EXTINF:10,
0640/064053.ts
#EXTINF:10,
0640/064054.ts
#EXTINF:10,
0640/064055.ts
#EXTINF:10,
0640/064056.ts
#EXTINF:10,
0640/064057.ts
#EXTINF:10,
0640/064058.ts
#EXTINF:10,
0640/064059.ts
#EXTINF:10,
0640/064060.ts
#EXTINF:10,
0640/064061.ts
#EXTINF:10,
0640/064062.ts
#EXTINF:10,
0640/064063.ts
#EXTINF:10,
0640/064064.ts
#EXTINF:10,
0640/064065.ts
#EXTINF:10,
0640/064066.ts
#EXTINF:10,
0640/064067.ts
#EXTINF:10,
0640/064068.ts
#EXTINF:10,
0640/064069.ts
#EXTINF:10,
0640/064070.ts
#EXTINF:10,
0640/064071.ts
#EXTINF:10,
0640/064072.ts
#EXTINF:10,
0640/064073.ts
#EXTINF:10,
0640/064074.ts
#EXTINF:10,
0640/064075.ts
#EXTINF:10,
0640/064076.ts
#EXTINF:10,
0640/064077.ts
#EXTINF:10,
0640/064078.ts
#EXTINF:10,
0640/064079.ts
#EXTINF:10,
0640/064080.ts
#EXTINF:10,
0640/064081.ts
#EXTINF:10,
0640/064082.ts
#EXTINF:10,
0640/064083.ts
#EXTINF:10,
0640/064084.ts
#EXTINF:10,
0640/064085.ts
#EXTINF:10,
0640/064086.ts
#EXTINF:10,
0640/064087.ts
#EXTINF:10,
0640/064088.ts
#EXTINF:10,
0640/064089.ts
#EXTINF:10,
0640/064090.ts
#EXTINF:10,
0640/064091.ts
#EXTINF:10,
0640/064092.ts
#EXTINF:10,
0640/064093.ts
#EXTINF:10,
0640/064094.ts
#EXTINF:10,
0640/064095.ts
#EXTINF:10,
0640/064096.ts
#EXTINF:10,
0640/064097.ts
#EXTINF:10,
0640/064098.ts
#EXTINF:10,
0640/064099.ts
#EXTINF:10,
0640/0640100.ts
#EXTINF:10,
0640/0640101.ts
#EXTINF:10,
0640/0640102.ts
#EXTINF:10,
0640/0640103.ts
#EXTINF:10,
0640/0640104.ts
#EXTINF:10,
0640/0640105.ts
#EXTINF:10,
0640/0640106.ts
#EXTINF:10,
0640/0640107.ts
#EXTINF:10,
0640/0640108.ts
#EXTINF:10,
0640/0640109.ts
#EXTINF:10,
0640/0640110.ts
#EXTINF:10,
0640/0640111.ts
#EXTINF:10,
0640/0640112.ts
#EXTINF:10,
0640/0640113.ts
#EXTINF:10,
0640/0640114.ts
#EXTINF:10,
0640/0640115.ts
#EXTINF:10,
0640/0640116.ts
#EXTINF:10,
0640/0640117.ts
#EXTINF:10,
0640/0640118.ts
#EXTINF:10,
0640/0640119.ts
#EXTINF:10,
0640/0640120.ts
#EXTINF:10,
0640/0640121.ts
#EXTINF:10,
0640/0640122.ts
#EXTINF:10,
0640/0640123.ts
#EXTINF:10,
0640/0640124.ts
#EXTINF:10,
0640/0640125.ts
#EXTINF:10,
0640/0640126.ts
#EXTINF:10,
0640/0640127.ts
#EXTINF:10,
0640/0640128.ts
#EXTINF:10,
0640/0640129.ts
#EXTINF:10,
0640/0640130.ts
#EXTINF:10,
0640/0640131.ts
#EXTINF:10,
0640/0640132.ts
#EXTINF:10,
0640/0640133.ts
#EXTINF:10,
0640/0640134.ts
#EXTINF:10,
0640/0640135.ts
#EXTINF:10,
0640/0640136.ts
#EXTINF:10,
0640/0640137.ts
#EXTINF:10,
0640/0640138.ts
#EXTINF:10,
0640/0640139.ts
#EXTINF:10,
0640/0640140.ts
#EXTINF:10,
0640/0640141.ts
#EXTINF:10,
0640/0640142.ts
#EXTINF:10,
0640/0640143.ts
#EXTINF:10,
0640/0640144.ts
#EXTINF:10,
0640/0640145.ts
#EXTINF:10,
0640/0640146.ts
#EXTINF:10,
0640/0640147.ts
#EXTINF:10,
0640/0640148.ts
#EXTINF:11,
0640/0640149.ts
#EXTINF:10,
0640/0640150.ts
#EXTINF:10,
0640/0640151.ts
#EXTINF:10,
0640/0640152.ts
#EXTINF:10,
0640/0640153.ts
#EXTINF:10,
0640/0640154.ts
#EXTINF:10,
0640/0640155.ts
#EXTINF:10,
0640/0640156.ts
#EXTINF:10,
0640/0640157.ts
#EXTINF:10,
0640/0640158.ts
#EXTINF:10,
0640/0640159.ts
#EXTINF:10,
0640/0640160.ts
#EXTINF:10,
0640/0640161.ts
#EXTINF:10,
0640/0640162.ts
#EXTINF:10,
0640/0640163.ts
#EXTINF:10,
0640/0640164.ts
#EXTINF:10,
0640/0640165.ts
#EXTINF:10,
0640/0640166.ts
#EXTINF:10,
0640/0640167.ts
#EXTINF:10,
0640/0640168.ts
#EXTINF:10,
0640/0640169.ts
#EXTINF:10,
0640/0640170.ts
#EXTINF:10,
0640/0640171.ts
#EXTINF:10,
0640/0640172.ts
#EXTINF:10,
0640/0640173.ts
#EXTINF:10,
0640/0640174.ts
#EXTINF:10,
0640/0640175.ts
#EXTINF:10,
0640/0640176.ts
#EXTINF:10,
0640/0640177.ts
#EXTINF:10,
0640/0640178.ts
#EXTINF:10,
0640/0640179.ts
#EXTINF:10,
0640/0640180.ts
#EXTINF:10,
0640/0640181.ts
#EXTINF:10,
0640/0640182.ts
#EXTINF:10,
0640/0640183.ts
#EXTINF:10,
0640/0640184.ts
#EXTINF:10,
0640/0640185.ts
#EXTINF:10,
0640/0640186.ts
#EXTINF:10,
0640/0640187.ts
#EXTINF:10,
0640/0640188.ts
#EXTINF:10,
0640/0640189.ts
#EXTINF:10,
0640/0640190.ts
#EXTINF:10,
0640/0640191.ts
#EXTINF:10,
0640/0640192.ts
#EXTINF:10,
0640/0640193.ts
#EXTINF:10,
0640/0640194.ts
#EXTINF:10,
0640/0640195.ts
#EXTINF:10,
0640/0640196.ts
#EXTINF:10,
0640/0640197.ts
#EXTINF:10,
0640/0640198.ts
#EXTINF:10,
0640/0640199.ts
#EXTINF:10,
0640/0640200.ts
#EXTINF:10,
0640/0640201.ts
#EXTINF:10,
0640/0640202.ts
#EXTINF:10,
0640/0640203.ts
#EXTINF:10,
0640/0640204.ts
#EXTINF:10,
0640/0640205.ts
#EXTINF:10,
0640/0640206.ts
#EXTINF:10,
0640/0640207.ts
#EXTINF:10,
0640/0640208.ts
#EXTINF:10,
0640/0640209.ts
#EXTINF:10,
0640/0640210.ts
#EXTINF:10,
0640/0640211.ts
#EXTINF:10,
0640/0640212.ts
#EXTINF:10,
0640/0640213.ts
#EXTINF:10,
0640/0640214.ts
#EXTINF:10,
0640/0640215.ts
#EXTINF:10,
0640/0640216.ts
#EXTINF:10,
0640/0640217.ts
#EXTINF:10,
0640/0640218.ts
#EXTINF:10,
0640/0640219.ts
#EXTINF:10,
0640/0640220.ts
#EXTINF:10,
0640/0640221.ts
#EXTINF:10,
0640/0640222.ts
#EXTINF:10,
0640/0640223.ts
#EXTINF:10,
0640/0640224.ts
#EXTINF:10,
0640/0640225.ts
#EXTINF:10,
0640/0640226.ts
#EXTINF:10,
0640/0640227.ts
#EXTINF:10,
0640/0640228.ts
#EXTINF:10,
0640/0640229.ts
#EXTINF:10,
0640/0640230.ts
#EXTINF:10,
0640/0640231.ts
#EXTINF:10,
0640/0640232.ts
#EXTINF:10,
0640/0640233.ts
#EXTINF:10,
0640/0640234.ts
#EXTINF:10,
0640/0640235.ts
#EXTINF:10,
0640/0640236.ts
#EXTINF:10,
0640/0640237.ts
#EXTINF:10,
0640/0640238.ts
#EXTINF:10,
0640/0640239.ts
#EXTINF:10,
0640/0640240.ts
#EXTINF:10,
0640/0640241.ts
#EXTINF:10,
0640/0640242.ts
#EXTINF:10,
0640/0640243.ts
#EXTINF:10,
0640/0640244.ts
#EXTINF:10,
0640/0640245.ts
#EXTINF:10,
0640/0640246.ts
#EXTINF:10,
0640/0640247.ts
#EXTINF:10,
0640/0640248.ts
#EXTINF:11,
0640/0640249.ts
#EXTINF:10,
0640/0640250.ts
#EXTINF:10,
0640/0640251.ts
#EXTINF:10,
0640/0640252.ts
#EXTINF:10,
0640/0640253.ts
#EXTINF:10,
0640/0640254.ts
#EXTINF:10,
0640/0640255.ts
#EXTINF:10,
0640/0640256.ts
#EXTINF:10,
0640/0640257.ts
#EXTINF:10,
0640/0640258.ts
#EXTINF:10,
0640/0640259.ts
#EXTINF:10,
0640/0640260.ts
#EXTINF:10,
0640/0640261.ts
#EXTINF:10,
0640/0640262.ts
#EXTINF:10,
0640/0640263.ts
#EXTINF:10,
0640/0640264.ts
#EXTINF:10,
0640/0640265.ts
#EXTINF:10,
0640/0640266.ts
#EXTINF:10,
0640/0640267.ts
#EXTINF:10,
0640/0640268.ts
#EXTINF:10,
0640/0640269.ts
#EXTINF:10,
0640/0640270.ts
#EXTINF:10,
0640/0640271.ts
#EXTINF:10,
0640/0640272.ts
#EXTINF:10,
0640/0640273.ts
#EXTINF:10,
0640/0640274.ts
#EXTINF:10,
0640/0640275.ts
#EXTINF:10,
0640/0640276.ts
#EXTINF:10,
0640/0640277.ts
#EXTINF:10,
0640/0640278.ts
#EXTINF:10,
0640/0640279.ts
#EXTINF:10,
0640/0640280.ts
#EXTINF:10,
0640/0640281.ts
#EXTINF:10,
0640/0640282.ts
#EXTINF:10,
0640/0640283.ts
#EXTINF:10,
0640/0640284.ts
#EXTINF:10,
0640/0640285.ts
#EXTINF:10,
0640/0640286.ts
#EXTINF:10,
0640/0640287.ts
#EXTINF:10,
0640/0640288.ts
#EXTINF:10,
0640/0640289.ts
#EXTINF:10,
0640/0640290.ts
#EXTINF:10,
0640/0640291.ts
#EXTINF:10,
0640/0640292.ts
#EXTINF:10,
0640/0640293.ts
#EXTINF:10,
0640/0640294.ts
#EXTINF:10,
0640/0640295.ts
#EXTINF:10,
0640/0640296.ts
#EXTINF:10,
0640/0640297.ts
#EXTINF:10,
0640/0640298.ts
#EXTINF:10,
0640/0640299.ts
#EXTINF:10,
0640/0640300.ts
#EXTINF:10,
0640/0640301.ts
#EXTINF:10,
0640/0640302.ts
#EXTINF:10,
0640/0640303.ts
#EXTINF:10,
0640/0640304.ts
#EXTINF:10,
0640/0640305.ts
#EXTINF:10,
0640/0640306.ts
#EXTINF:10,
0640/0640307.ts
#EXTINF:10,
0640/0640308.ts
#EXTINF:10,
0640/0640309.ts
#EXTINF:10,
0640/0640310.ts
#EXTINF:10,
0640/0640311.ts
#EXTINF:10,
0640/0640312.ts
#EXTINF:10,
0640/0640313.ts
#EXTINF:10,
0640/0640314.ts
#EXTINF:10,
0640/0640315.ts
#EXTINF:10,
0640/0640316.ts
#EXTINF:10,
0640/0640317.ts
#EXTINF:10,
0640/0640318.ts
#EXTINF:10,
0640/0640319.ts
#EXTINF:10,
0640/0640320.ts
#EXTINF:10,
0640/0640321.ts
#EXTINF:10,
0640/0640322.ts
#EXTINF:10,
0640/0640323.ts
#EXTINF:10,
0640/0640324.ts
#EXTINF:10,
0640/0640325.ts
#EXTINF:10,
0640/0640326.ts
#EXTINF:10,
0640/0640327.ts
#EXTINF:10,
0640/0640328.ts
#EXTINF:10,
0640/0640329.ts
#EXTINF:10,
0640/0640330.ts
#EXTINF:10,
0640/0640331.ts
#EXTINF:10,
0640/0640332.ts
#EXTINF:10,
0640/0640333.ts
#EXTINF:10,
0640/0640334.ts
#EXTINF:10,
0640/0640335.ts
#EXTINF:10,
0640/0640336.ts
#EXTINF:10,
0640/0640337.ts
#EXTINF:10,
0640/0640338.ts
#EXTINF:10,
0640/0640339.ts
#EXTINF:10,
0640/0640340.ts
#EXTINF:10,
0640/0640341.ts
#EXTINF:10,
0640/0640342.ts
#EXTINF:10,
0640/0640343.ts
#EXTINF:10,
0640/0640344.ts
#EXTINF:10,
0640/0640345.ts
#EXTINF:10,
0640/0640346.ts
#EXTINF:10,
0640/0640347.ts
#EXTINF:10,
0640/0640348.ts
#EXTINF:11,
0640/0640349.ts
#EXTINF:10,
0640/0640350.ts
#EXTINF:10,
0640/0640351.ts
#EXTINF:10,
0640/0640352.ts
#EXTINF:10,
0640/0640353.ts
#EXTINF:10,
0640/0640354.ts
#EXTINF:10,
0640/0640355.ts
#EXTINF:10,
0640/0640356.ts
#EXTINF:10,
0640/0640357.ts
#EXTINF:10,
0640/0640358.ts
#EXTINF:10,
0640/0640359.ts
#EXTINF:10,
0640/0640360.ts
#EXTINF:10,
0640/0640361.ts
#EXTINF:10,
0640/0640362.ts
#EXTINF:10,
0640/0640363.ts
#EXTINF:10,
0640/0640364.ts
#EXTINF:10,
0640/0640365.ts
#EXTINF:10,
0640/0640366.ts
#EXTINF:10,
0640/0640367.ts
#EXTINF:10,
0640/0640368.ts
#EXTINF:10,
0640/0640369.ts
#EXTINF:10,
0640/0640370.ts
#EXTINF:10,
0640/0640371.ts
#EXTINF:10,
0640/0640372.ts
#EXTINF:10,
0640/0640373.ts
#EXTINF:10,
0640/0640374.ts
#EXTINF:10,
0640/0640375.ts
#EXTINF:10,
0640/0640376.ts
#EXTINF:10,
0640/0640377.ts
#EXTINF:10,
0640/0640378.ts
#EXTINF:10,
0640/0640379.ts
#EXTINF:10,
0640/0640380.ts
#EXTINF:10,
0640/0640381.ts
#EXTINF:10,
0640/0640382.ts
#EXTINF:10,
0640/0640383.ts
#EXTINF:10,
0640/0640384.ts
#EXTINF:10,
0640/0640385.ts
#EXTINF:10,
0640/0640386.ts
#EXTINF:10,
0640/0640387.ts
#EXTINF:10,
0640/0640388.ts
#EXTINF:10,
0640/0640389.ts
#EXTINF:10,
0640/0640390.ts
#EXTINF:10,
0640/0640391.ts
#EXTINF:10,
0640/0640392.ts
#EXTINF:10,
0640/0640393.ts
#EXTINF:10,
0640/0640394.ts
#EXTINF:10,
0640/0640395.ts
#EXTINF:10,
0640/0640396.ts
#EXTINF:10,
0640/0640397.ts
#EXTINF:10,
0640/0640398.ts
#EXTINF:10,
0640/0640399.ts
#EXTINF:10,
0640/0640400.ts
#EXTINF:10,
0640/0640401.ts
#EXTINF:10,
0640/0640402.ts
#EXTINF:10,
0640/0640403.ts
#EXTINF:10,
0640/0640404.ts
#EXTINF:10,
0640/0640405.ts
#EXTINF:10,
0640/0640406.ts
#EXTINF:10,
0640/0640407.ts
#EXTINF:10,
0640/0640408.ts
#EXTINF:10,
0640/0640409.ts
#EXTINF:10,
0640/0640410.ts
#EXTINF:10,
0640/0640411.ts
#EXTINF:10,
0640/0640412.ts
#EXTINF:10,
0640/0640413.ts
#EXTINF:10,
0640/0640414.ts
#EXTINF:10,
0640/0640415.ts
#EXTINF:10,
0640/0640416.ts
#EXTINF:10,
0640/0640417.ts
#EXTINF:10,
0640/0640418.ts
#EXTINF:10,
0640/0640419.ts
#EXTINF:10,
0640/0640420.ts
#EXTINF:10,
0640/0640421.ts
#EXTINF:10,
0640/0640422.ts
#EXTINF:10,
0640/0640423.ts
#EXTINF:10,
0640/0640424.ts
#EXTINF:10,
0640/0640425.ts
#EXTINF:10,
0640/0640426.ts
#EXTINF:10,
0640/0640427.ts
#EXTINF:10,
0640/0640428.ts
#EXTINF:10,
0640/0640429.ts
#EXTINF:10,
0640/0640430.ts
#EXTINF:10,
0640/0640431.ts
#EXTINF:10,
0640/0640432.ts
#EXTINF:10,
0640/0640433.ts
#EXTINF:10,
0640/0640434.ts
#EXTINF:10,
0640/0640435.ts
#EXTINF:10,
0640/0640436.ts
#EXTINF:10,
0640/0640437.ts
#EXTINF:10,
0640/0640438.ts
#EXTINF:10,
0640/0640439.ts
#EXTINF:10,
0640/0640440.ts
#EXTINF:10,
0640/0640441.ts
#EXTINF:10,
0640/0640442.ts
#EXTINF:10,
0640/0640443.ts
#EXTINF:10,
0640/0640444.ts
#EXTINF:10,
0640/0640445.ts
#EXTINF:10,
0640/0640446.ts
#EXTINF:10,
0640/0640447.ts
#EXTINF:10,
0640/0640448.ts
#EXTINF:11,
0640/0640449.ts
#EXTINF:10,
0640/0640450.ts
#EXTINF:10,
0640/0640451.ts
#EXTINF:10,
0640/0640452.ts
#EXTINF:10,
0640/0640453.ts
#EXTINF:10,
0640/0640454.ts
#EXTINF:10,
0640/0640455.ts
#EXTINF:10,
0640/0640456.ts
#EXTINF:10,
0640/0640457.ts
#EXTINF:10,
0640/0640458.ts
#EXTINF:10,
0640/0640459.ts
#EXTINF:10,
0640/0640460.ts
#EXTINF:10,
0640/0640461.ts
#EXTINF:10,
0640/0640462.ts
#EXTINF:10,
0640/0640463.ts
#EXTINF:10,
0640/0640464.ts
#EXTINF:10,
0640/0640465.ts
#EXTINF:10,
0640/0640466.ts
#EXTINF:10,
0640/0640467.ts
#EXTINF:10,
0640/0640468.ts
#EXTINF:10,
0640/0640469.ts
#EXTINF:10,
0640/0640470.ts
#EXTINF:10,
0640/0640471.ts
#EXTINF:10,
0640/0640472.ts
#EXTINF:10,
0640/0640473.ts
#EXTINF:10,
0640/0640474.ts
#EXTINF:10,
0640/0640475.ts
#EXTINF:10,
0640/0640476.ts
#EXTINF:10,
0640/0640477.ts
#EXTINF:10,
0640/0640478.ts
#EXTINF:10,
0640/0640479.ts
#EXTINF:10,
0640/0640480.ts
#EXTINF:10,
0640/0640481.ts
#EXTINF:10,
0640/0640482.ts
#EXTINF:10,
0640/0640483.ts
#EXTINF:10,
0640/0640484.ts
#EXTINF:10,
0640/0640485.ts
#EXTINF:10,
0640/0640486.ts
#EXTINF:10,
0640/0640487.ts
#EXTINF:10,
0640/0640488.ts
#EXTINF:10,
0640/0640489.ts
#EXTINF:10,
0640/0640490.ts
#EXTINF:10,
0640/0640491.ts
#EXTINF:10,
0640/0640492.ts
#EXTINF:10,
0640/0640493.ts
#EXTINF:10,
0640/0640494.ts
#EXTINF:10,
0640/0640495.ts
#EXTINF:10,
0640/0640496.ts
#EXTINF:10,
0640/0640497.ts
#EXTINF:10,
0640/0640498.ts
#EXTINF:10,
0640/0640499.ts
#EXTINF:10,
0640/0640500.ts
#EXTINF:10,
0640/0640501.ts
#EXTINF:10,
0640/0640502.ts
#EXTINF:10,
0640/0640503.ts
#EXTINF:10,
0640/0640504.ts
#EXTINF:10,
0640/0640505.ts
#EXTINF:10,
0640/0640506.ts
#EXTINF:10,
0640/0640507.ts
#EXTINF:10,
0640/0640508.ts
#EXTINF:10,
0640/0640509.ts
#EXTINF:10,
0640/0640510.ts
#EXTINF:10,
0640/0640511.ts
#EXTINF:10,
0640/0640512.ts
#EXTINF:10,
0640/0640513.ts
#EXTINF:10,
0640/0640514.ts
#EXTINF:10,
0640/0640515.ts
#EXTINF:10,
0640/0640516.ts
#EXTINF:10,
0640/0640517.ts
#EXTINF:10,
0640/0640518.ts
#EXTINF:10,
0640/0640519.ts
#EXTINF:10,
0640/0640520.ts
#EXTINF:10,
0640/0640521.ts
#EXTINF:10,
0640/0640522.ts
#EXTINF:10,
0640/0640523.ts
#EXTINF:10,
0640/0640524.ts
#EXTINF:10,
0640/0640525.ts
#EXTINF:10,
0640/0640526.ts
#EXTINF:10,
0640/0640527.ts
#EXTINF:10,
0640/0640528.ts
#EXTINF:10,
0640/0640529.ts
#EXTINF:10,
0640/0640530.ts
#EXTINF:10,
0640/0640531.ts
#EXTINF:10,
0640/0640532.ts
#EXTINF:10,
0640/0640533.ts
#EXTINF:10,
0640/0640534.ts
#EXTINF:10,
0640/0640535.ts
#EXT-X-ENDLIST
`

func TestParseBestMediaURI(t *testing.T) {
	buf := bytes.NewBufferString(m3u8Sample1)
	url, typ, err := ParseBestMediaURI(buf)
	require.NoError(t, err)
	require.Equal(t, "http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/3340_vod.m3u8", url)
	require.Equal(t, m3u8.MASTER, typ)

	buf = bytes.NewBufferString(m3u8Sample2)
	url, typ, err = ParseBestMediaURI(buf)
	require.NoError(t, err)
	require.Equal(t, "", url)
	require.Equal(t, m3u8.MEDIA, typ)
}
